openapi: 3.1.0
info:
  title: Application.v1
  version: '1.0'
servers:
  - url: 'http://localhost:3000/v1'
    description: local
paths:
  '/accounts/{id}':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    get:
      summary: アカウントを取得する
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: ../models/Account.yaml
      operationId: get-accounts-id
      description: ''
      parameters:
        - schema:
            type: string
          in: header
          name: Authorization
          required: true
    patch:
      summary: アカウントを更新する
      operationId: patch-accounts-id
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: ../models/Account.yaml
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                account:
                  type: object
                  properties:
                    email:
                      type:
                        - string
                        - 'null'
                      format: email
                    first_name:
                      type:
                        - string
                        - 'null'
                    last_name:
                      type:
                        - string
                        - 'null'
                    first_name_kana:
                      type:
                        - string
                        - 'null'
                    last_name_kana:
                      type:
                        - string
                        - 'null'
                    gender:
                      type:
                        - string
                        - 'null'
                      enum:
                        - male
                        - female
                        - other
                    birthday:
                      type:
                        - string
                        - 'null'
                      format: date
                    avatar:
                      type:
                        - string
                        - 'null'
      parameters:
        - schema:
            type: string
          in: header
          name: Authorization
          required: true
    delete:
      summary: アカウントを削除する
      operationId: delete-accounts-id
      responses:
        '204':
          description: No Content
      parameters:
        - schema:
            type: string
          in: header
          name: Authorization
          required: true
  '/accounts/{account_id}/academic_histories':
    parameters:
      - schema:
          type: string
        name: account_id
        in: path
        required: true
    get:
      summary: アカウントの学歴一覧を取得する
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  academic_histories:
                    type: array
                    items:
                      $ref: ../models/AcademicHistory.yaml
      operationId: get-accounts-id-academic_histories
      parameters:
        - schema:
            type: string
          in: header
          name: Authorization
    post:
      summary: アカウントの学歴を作成する
      operationId: post-accounts-id-academic_histories
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: ../models/AcademicHistory.yaml
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                academic_history:
                  type: object
                  required:
                    - name
                    - since_date
                    - until_date
                    - type
                  properties:
                    name:
                      type: string
                      example: 明治大学
                    faculty:
                      type: string
                      example: 情報コミュニケーション学部
                    since_date:
                      type: string
                      format: date
                      example: '2008-04-01'
                    until_date:
                      type: string
                      format: date
                      example: '2012-03-31'
                    type:
                      type: string
                      example: university
                      enum:
                        - graduate_school_doctor
                        - graduate_school_master
                        - university
                        - technical_college
                        - vocational_school
                        - junior_college
                        - high_school
                      description: 「大学院（博士）」「大学院（修士）」「大学」「高専」「専門学校」「短期大学」「高校」
              required:
                - academic_history
  '/accounts/{account_id}/applicants':
    parameters:
      - schema:
          type: string
        name: account_id
        in: path
        required: true
    get:
      summary: アカウントの応募一覧を取得する
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  applicants:
                    type: array
                    items:
                      allOf:
                        - $ref: ../models/Applicant.yaml
                        - type: object
                          properties:
                            recruitment:
                              $ref: ../models/Recruitment.yaml
      operationId: get-accounts-id-applicants
    post:
      summary: アカウントの応募を作成する
      operationId: post-accounts-id-applicants
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                allOf:
                  - $ref: ../models/Applicant.yaml
                  - type: object
                    properties:
                      recruitment:
                        $ref: ../models/Recruitment.yaml
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                applicant:
                  type: object
                  required:
                    - recruitment_id
                  properties:
                    recruitment_id:
                      type: string
                      format: uuid
              required:
                - applicant
  '/accounts/{account_id}/notifications':
    parameters:
      - schema:
          type: string
        name: account_id
        in: path
        required: true
    get:
      summary: アカウントの通知一覧を取得する
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  notifications:
                    type: array
                    items:
                      $ref: ../models/Notification.yaml
      operationId: get-accounts-id-notifications
  '/accounts/{account_id}/work_histories':
    parameters:
      - schema:
          type: string
        name: account_id
        in: path
        required: true
    get:
      summary: アカウントの職歴一覧を取得する
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  work_histories:
                    type: array
                    items:
                      allOf:
                        - $ref: ../models/WorkHistory.yaml
                        - type: object
                          properties:
                            occupations:
                              type:
                                - string
                                - array
                              items:
                                $ref: ../models/OccupationCategory.yaml
          headers: {}
      operationId: get-accounts-id-work_histories
      parameters:
        - schema:
            type: string
          in: header
          name: Authorization
          required: true
      x-internal: false
    post:
      summary: アカウントの職歴を作成する
      operationId: post-accounts-id-work_histories
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: ../models/WorkHistory.yaml
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                work_history:
                  type: object
                  required:
                    - name
                    - is_employed
                    - since_date
                  properties:
                    name:
                      type: string
                      example: 株式会社SIMULA Labs
                    is_employed:
                      type: boolean
                      description: 「在職中」「離職中」
                      default: true
                    position:
                      type: string
                      example: 主任
                    since_date:
                      type: string
                      format: date
                      example: '2019-08-01'
                    until_date:
                      format: date
                      example: '2020-05-01'
                      type: string
                    department:
                      type: string
                      example: 部署名
              required:
                - work_history
        description: ''
  '/academic_histories/{id}':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    get:
      summary: 学歴を取得する
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: ../models/AcademicHistory.yaml
      operationId: get-academic_histories-id
    patch:
      summary: 学歴を更新する
      operationId: patch-academic_histories-id
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: ../models/AcademicHistory.yaml
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                academic_history:
                  type: object
                  properties:
                    name:
                      type:
                        - string
                        - 'null'
                      example: 明治大学
                    faculty:
                      type:
                        - string
                        - 'null'
                      example: 情報コミュニケーション学部
                    since_date:
                      type:
                        - string
                        - 'null'
                      format: date
                      example: '2008-04-01'
                    until_date:
                      type:
                        - string
                        - 'null'
                      format: date
                      example: '2012-03-31'
                    type:
                      type:
                        - string
                        - 'null'
                      example: university
                      enum:
                        - graduate_school_doctor
                        - graduate_school_master
                        - university
                        - technical_college
                        - vocational_school
                        - junior_college
                        - high_school
                      description: 「大学院（博士）」「大学院（修士）」「大学」「高専」「専門学校」「短期大学」「高校」
    delete:
      summary: 学歴を削除する
      operationId: delete-academic_histories-id
      responses:
        '204':
          description: No Content
  '/work_histories/{id}':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    get:
      summary: 職歴を取得する
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: ../models/WorkHistory.yaml
      operationId: get-work_histories-id
    patch:
      summary: 職歴を更新する
      operationId: patch-work_histories-id
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: ../models/WorkHistory.yaml
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                work_history:
                  type: object
                  properties:
                    name:
                      type: string
                      example: 株式会社SIMULA Labs
                    is_employed:
                      type: boolean
                      description: 「在職中」「離職中」
                      example: true
                      default: true
                    position:
                      type: string
                      example: 主任
                    since_date:
                      type: string
                      format: date
                      example: '2019-08-01'
                    until_date:
                      format: date
                      example: '2020-05-01'
                      type: string
                    department:
                      type: string
                      example: 部署名
      description: test description
    delete:
      summary: 職歴を削除する
      operationId: delete-work_histories-id
      responses:
        '204':
          description: No Content
  /occupation_categories:
    get:
      summary: 職種カテゴリー（職種サブカテゴリーも含め）一覧を取得する
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  occupation_categories:
                    allOf:
                      - type: array
                        items:
                          $ref: ../models/OccupationCategory.yaml
                      - type: object
                        properties:
                          occupation_sub_categories:
                            type: array
                            items:
                              $ref: ../models/OccupationSubCategory.yaml
      operationId: get-occupation_categories
  /recruitments:
    get:
      summary: 募集一覧を取得する
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  recruitments:
                    type: array
                    items:
                      $ref: ../models/Recruitment.yaml
      operationId: get-recruitments
  /companies:
    post:
      summary: ''
      operationId: post-companies
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: ../models/Company.yaml
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
              required:
                - name
  '/companies/{id}':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    get:
      summary: 企業を取得する
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: ../models/Company.yaml
      operationId: get-companies-id
    patch:
      summary: 企業を更新する
      operationId: patch-companies-id
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: ../models/Company.yaml
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                company:
                  type: object
                  properties:
                    name:
                      type:
                        - string
                        - 'null'
                      example: 株式会社SIMULA Labs
                    name_kana:
                      type:
                        - string
                        - 'null'
                      example: シミュララボ
                    head_office_location:
                      type:
                        - string
                        - 'null'
                      example: 東京都港区元赤坂1-7-18
                    year_of_establishment:
                      type:
                        - string
                        - 'null'
                      format: date
                    hp_url:
                      type:
                        - string
                        - 'null'
                      format: uri
                      example: 'https://simula-labs.com/'
                    phone:
                      type:
                        - string
                        - 'null'
                      example: 03-1234-5678
                    logo:
                      type:
                        - string
                        - 'null'
  '/companies/{company_id}/applicants':
    parameters:
      - schema:
          type: string
        name: company_id
        in: path
        required: true
    get:
      summary: 企業の応募一覧を取得する
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  applicants:
                    type: array
                    items:
                      $ref: ../models/Applicant.yaml
          headers: {}
      operationId: get-companies-id-applicants
      parameters:
        - schema:
            type: string
          in: header
          name: Authorization
          required: true
  '/applicants/{id}':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    patch:
      summary: 応募を更新する（採用・不採用を決める）
      operationId: patch-applicants-id
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: ../models/Applicant.yaml
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                applicant:
                  type: object
                  required:
                    - status
                  properties:
                    status:
                      type: string
                      enum:
                        - offered
                        - rejected
              required:
                - applicant
  '/companies/{company_id}/employments':
    parameters:
      - schema:
          type: string
        name: company_id
        in: path
        required: true
    get:
      summary: 企業の雇用一覧を取得する
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  employments:
                    type: array
                    items:
                      $ref: ../models/Employment.yaml
      operationId: get-companies-id-employments
  '/employments/{id}':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    delete:
      summary: 雇用を削除する
      operationId: delete-employments-id
      responses:
        '204':
          description: No Content
  '/companies/{company_id}/employments/invite':
    parameters:
      - schema:
          type: string
        name: company_id
        in: path
        required: true
    post:
      summary: 企業招待メールを送信する
      operationId: post-companies-company_id-employments-invite
      responses:
        '204':
          description: No Content
      description: 受け取ったメールアドレスでAccountとEmploymentを作成し、企業招待メールを送信する
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
              required:
                - email
        description: ''
  '/employments/{employment_id}/join':
    parameters:
      - schema:
          type: string
        name: employment_id
        in: path
        required: true
    get:
      summary: 招待したアカウントの本登録を完了する
      tags: []
      responses:
        '204':
          description: No Content
      operationId: get-employments-employment_id-join
      description: 招待したAccountのemail_verfication_statusをverfiedにする
      parameters:
        - schema:
            type: string
          in: query
          name: token
          required: true
          description: Employmentのinvite_token
  '/companies/{company_id}/recruitments':
    parameters:
      - schema:
          type: string
        name: company_id
        in: path
        required: true
    get:
      summary: 企業の募集一覧を取得する
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  recruitments:
                    type: array
                    items:
                      $ref: ../models/Recruitment.yaml
      operationId: get-companies-id-recruitments
    post:
      summary: 企業の募集を作成する
      operationId: post-companies-id-recruitments
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: ../models/Recruitment.yaml
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                recruitment:
                  type: object
                  required:
                    - title
                    - is_released
                  properties:
                    title:
                      type: string
                      example: 三度の飯よりReact！そんなGeekなあなたへ
                    min_amount:
                      type: integer
                    max_amount:
                      type: integer
                    billing_method:
                      type: string
                      enum:
                        - hourly
                        - daily
                        - monthly
                        - yearly
                      description: 「時給」「日給」「月給」「年収」
                    department:
                      type: string
                      example: 開発部
                    position:
                      type: string
                      example: 管理職
                    job_description:
                      type: string
                      example: 新規事業のフロントサイドエンジニア
                    work_conditions:
                      type: string
                      example: 保険・交通費とか諸々
                    qualification_requirement:
                      type: string
                      example: ・大卒以上　・40歳未満
                    is_released:
                      type: boolean
                      default: false
                    occupation_sub_category:
                      $ref: ../models/OccupationSubCategory.yaml
                    occupation_description:
                      type: string
                      description: RecruitmentOccupationのdescriptionに入る
              required:
                - recruitment
  '/recruitments/{id}':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    get:
      summary: 募集を取得する
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: ../models/Recruitment.yaml
      operationId: get-recruitments-id
    patch:
      summary: 募集を更新する
      operationId: patch-recruitments-id
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: ../models/Recruitment.yaml
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                recruitment:
                  type: object
                  properties:
                    title:
                      type: string
                      example: 三度の飯よりReact！そんなGeekなあなたへ
                    min_amount:
                      type: integer
                    max_amount:
                      type: integer
                    billing_method:
                      type: string
                      enum:
                        - hourly
                        - daily
                        - monthly
                        - yearly
                      description: 「時給」「日給」「月給」「年収」
                    department:
                      type: string
                      example: 開発部
                    position:
                      type: string
                      example: 管理職
                    job_description:
                      type: string
                      example: 新規事業のフロントサイドエンジニア
                    work_conditions:
                      type: string
                      example: 保険・交通費とか諸々
                    qualification_requirement:
                      type: string
                      example: ・大卒以上　・40歳未満
                    is_released:
                      type: boolean
                      default: false
                    occupation_category:
                      $ref: ../models/OccupationCategory.yaml
                    occupation_sub_category:
                      $ref: ../models/OccupationSubCategory.yaml
                    occupation_name:
                      type: string
                      description: RecruitmentOccupationのnameに入る
    delete:
      summary: ''
      operationId: delete-recruitments-id
      responses:
        '204':
          description: No Content
components:
  schemas: {}
